<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ssic.catering.base.mapper.AdminUsersRoleExMapper" >
   <select id="selectAdminUsersDtosBy" resultType="com.ssic.catering.base.dto.AdminUsersDto">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 04 14:59:20 CST 2015.
    -->
    select 
    distinct
	t2.id as id,
	t2.age as age,
	t2.createdatetime as createdatetime,
	t2.dept_id as deptId,
	t2.email as email,
	t2.gender as gender,
	t2.isadmin as isadmin,
	t2.modifydatetime as modifydatetime,
	t2.name as name,
	t2.pj_no as pjNo,
	t2.post_no as postNo,
	t2.password as password,
	t2.qjy_account as qjyAccount,
	t2.user_account as userAccount,
	t2.user_image as userImage,
	t2.user_no as userNo,
	t2.stat as stat,
	t2.isdelete as isdelete    
    from 
    	t_ctr_admin_users_role t1
    
    left join
    	t_ctr_admin_users t2  
    on 
    	t1.user_id = t2.id 
    <if test="example != null" >
     <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and t1.${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and t1.${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and t1.${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and t1.${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
     	and t2.stat = 1 
    </where>
    </if>
    <if test="example.orderByClause != null" >
      order by t2.${example.orderByClause}
    </if>
  </select>
  
  
   <select id="selectAdminUsersDtoCountBy" resultType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 04 14:59:20 CST 2015.
    -->
    select
	count(t2.id)  
    from 
    	t_ctr_admin_users_role t1
    
    left join
    	t_ctr_admin_users t2  
    on 
    	t1.user_id = t2.id 
    <if test="example != null" >
     <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and t1.${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and t1.${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and t1.${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and t1.${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
      and t2.stat = 1 
    </where>
    </if>
    <if test="example.orderByClause != null" >
      order by t2.${example.orderByClause}
    </if>
  </select>
 
</mapper>